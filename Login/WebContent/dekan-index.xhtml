<?xml version="1.0" encoding="US-ASCII" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>

	<title>Dekan Index</title>

	<link rel="stylesheet" href="./css/bootstrap.css" />
	<link rel="stylesheet" href="./css/default.css" />

</h:head>
<!-- body -->
<h:body>
	<div style="height: 120px;">
		<p:graphicImage value="/Image/iui_19.png"
			style="position:absolute; top:20px; right:20px;" />
	</div>
	<p:tabView id="outer-tabview">
		<p:ajax event="tabChange" listener="#{DekanBean.onTabChange}"
			update=":outer-tabview:tabview-exRules:exRules-create-frame" />

		<p:tab title="Modulhandbuch">
			<p:tabView id="tabview-modManual">
				<!-- TabView -->
				<p:tab title="Erstellen">
					<!-- Begin of first tab // Start -->
					<p:layout style="min-width:400px;min-height:500px;"
						id="dekan-layout">
						<p:layoutUnit position="center">
							<h:form id="dekan-frame">
								<h2>Erstellen eines Modulhandbuchs</h2>
								<table width="250" border="0" cellpadding="2">
									<tr>
										<!-- ModManual(String modManTitle, String description, String exRulesTitle, Date deadline) -->
										<td><h:outputText value="Titel: " /> <h:inputText
												id="modManTitle" value="#{DekanBean.modManTitle}"
												styleClass="input_text" /></td>
									</tr>
									<tr>
										<td><h:outputText value="Beschreibung:  " /> <h:inputText
												id="description" value="#{DekanBean.description}"
												styleClass="input_text" /></td>
									</tr>
									<tr>
										<td><h:outputText value="Pr&uuml;fungsordnung: " /> <p:selectOneMenu
												style="width:220px" value="#{DekanBean.exRules}">
												<f:selectItem itemLabel="Pr&uuml;fungsordnung" itemValue="" />
												<f:selectItems value="#{DekanBean.exRulesList}" var="exRule"
													itemLabel="#{exRule.exRulesTitle}"
													itemValue="#{exRule.exRulesTitle}" />
											</p:selectOneMenu></td>
									</tr>
									<tr>
										<td><h:outputText value="Stichtag: " /> <p:calendar
												value="#{DekanBean.deadline}" locale="de" id="popupCal1" /></td>
									</tr>
									<tr>
										<td colspan="2" align="left"><p:commandButton
												icon="ui-icon-trash" value="Felder l&ouml;schen"
												update=":outer-tabview:tabview-modManual:dekan-frame"
												action="#{DekanBean.resetFields}" /> <p:commandButton
												icon="ui-icon-plusthick"
												actionListener="#{DekanBean.saveModManual}" value="Erstellen"
												update=":outer-tabview:tabview-modManual:dekan-delete-frame:modManuals, 
												:outer-tabview:tabview-modManual:dekan-edit-frame:modManuals" /></td>
									</tr>
								</table>
								<p:messages id="dekan-messages" for="dekan-messages"
									showDetail="true" autoUpdate="true" closable="true" />
							</h:form>
						</p:layoutUnit>
					</p:layout>
				</p:tab>

				<p:tab title="Bearbeiten">
					<p:layout style="min-width:400px;min-height:500px;"
						id="edit-layout">

						<p:layoutUnit position="center">
							<h:form id="dekan-edit-frame">
								<h2>Bearbeiten eines Modulhandbuchs</h2>
								<table class="admin-edit-t" width="250" border="0"
									cellpadding="2">
									<tr>
										<td><h:outputText value="Pr&uuml;fungsordnung" /> <p:selectOneMenu
												style="width:220px" value="#{DekanBean.exRules}">
												<f:selectItem itemLabel="Alle Pr&uuml;fungsordnungen" itemValue="" />
												<f:selectItems value="#{DekanBean.exRulesList}" var="exRule"
													itemLabel="#{exRule.exRulesTitle}"
													itemValue="#{exRule.exRulesTitle}" />
											</p:selectOneMenu></td>
									</tr>
									<tr>
										<td><p:commandButton
												actionListener="#{DekanBean.actualizeModManualList}"
												value="Filtern"
												update=":outer-tabview:tabview-modManual:dekan-edit-frame:modManuals" /></td>
									</tr>
								</table>
								<br />
								<p:dataTable id="modManuals" var="modManual"
									value="#{DekanBean.modManualList}" style="max-width:1024px"
									scrollable="true" scrollHeight="300" editable="true">

									<p:ajax event="rowEdit" listener="#{DekanBean.onEdit}"
										update=":outer-tabview:tabview-modManual:dekan-edit-frame:modManuals, 
										:outer-tabview:tabview-modManual:dekan-delete-frame:modManuals" />

									<p:ajax event="rowEditCancel" listener="#{DekanBean.onCancel}"
										update=":outer-tabview:tabview-modManual:dekan-edit-frame:modManuals, 
										:outer-tabview:tabview-modManual:dekan-delete-frame:modManuals" />

									<p:column headerText="Titel" footerText="" style="width:25%">
										<h:outputText value="#{modManual.modManTitle}" />
									</p:column>

									<p:column headerText="Beschreibung" footerText=""
										style="width:40%">
										<p:cellEditor>
											<f:facet name="output">
												<h:outputText value="#{modManual.description}" />
											</f:facet>
											<f:facet name="input">
												<p:inputText value="#{modManual.description}"
													style="width:100%" />
											</f:facet>
										</p:cellEditor>
									</p:column>

									<p:column headerText="Pr&uuml;fungsordnung" footerText=""
										style="width:18%">
										<p:cellEditor>
											<f:facet name="output">
												<h:outputText value="#{modManual.exRulesTitle}" />
											</f:facet>
											<f:facet name="input">
												<h:selectOneMenu value="#{modManual.exRulesTitle}">
													<f:selectItems value="#{DekanBean.exRulesList}"
														var="exRule" itemLabel="#{exRule.exRulesTitle}"
														itemValue="#{exRule.exRulesTitle}" />
												</h:selectOneMenu>
											</f:facet>
										</p:cellEditor>
									</p:column>

									<p:column headerText="Stichtag" footerText="" style="width:13%">
										<p:cellEditor>
											<f:facet name="output">
												<h:outputText value="#{modManual.deadline}" />
											</f:facet>
											<f:facet name="input">
												<p:calendar value="#{modManual.deadline}" id="popupCal2" />
											</f:facet>
										</p:cellEditor>
									</p:column>

									<p:column style="width:4%">
										<p:rowEditor />
									</p:column>
								</p:dataTable>
								<p:messages id="edit-messages" showDetail="true"
									autoUpdate="true" for="edit-messages" />
							</h:form>
						</p:layoutUnit>
					</p:layout>
				</p:tab>

				<p:tab title="L&ouml;schen">
					<p:layout style="min-width:400px;min-height:500px;"
						id="delete-layout">

						<p:layoutUnit position="center">
							<h:form id="dekan-delete-frame">
								<h2>L&ouml;schen eines Modulhandbuchs</h2>
								<table class="admin-edit-t" width="250" border="0"
									cellpadding="2">
									<tr>
										<td><h:outputText value="Pr&uuml;fungsordnung" /> <p:selectOneMenu
												value="#{DekanBean.exRules}">
												<f:selectItem itemLabel="Alle Pr&uuml;fungsordnungen" itemValue="" />
												<f:selectItems value="#{DekanBean.exRulesList}" var="exRule"
													itemLabel="#{exRule.exRulesTitle}"
													itemValue="#{exRule.exRulesTitle}" />
											</p:selectOneMenu></td>
									</tr>
									<tr>
										<td><p:commandButton
												actionListener="#{DekanBean.actualizeModManualList}"
												value="Filtern"
												update=":outer-tabview:tabview-modManual:dekan-delete-frame:modManuals" /></td>
									</tr>
								</table>
								<br />
								<p:dataTable id="modManuals" var="modManual"
									value="#{DekanBean.modManualList}" style="max-width:1024px"
									scrollable="true" scrollHeight="300" editable="true">

									<p:column headerText="Titel" footerText="" style="width:25%">
										<h:outputText value="#{modManual.modManTitle}" />
									</p:column>

									<p:column headerText="Beschreibung" footerText=""
										style="width:40%">
										<h:outputText value="#{modManual.description}" />
									</p:column>

									<p:column headerText="Pr&uuml;fungsordnung" footerText=""
										style="width:18%">
										<h:outputText value="#{modManual.exRulesTitle}" />
									</p:column>

									<p:column headerText="Stichtag" footerText="" style="width:13%">
										<h:outputText value="#{modManual.deadline}" />
									</p:column>

									<p:column style="width:4%" footerText="">
										<p:commandButton icon="ui-icon-trash" oncomplete="dlg.show();"
											update=":outer-tabview:tabview-modManual:dekan-delete-frame:modManuals,
											:outer-tabview:tabview-modManual:dekan-edit-frame:modManuals">
											<f:setPropertyActionListener value="#{modManual}"
												target="#{DekanBean.currentMM}" />
										</p:commandButton>

									</p:column>
								</p:dataTable>
								<p:messages id="edit-messages" showDetail="true"
									autoUpdate="true" for="edit-messages" />
							</h:form>
						</p:layoutUnit>
						<p:confirmDialog widgetVar="dlg" id="deleteDialog" header="L&ouml;schen"
							message="Wirklich l&ouml;schen?" width="400" modal="true" closable="false"
							severity="alert">
							<h:panelGroup layout="block" style="text-align: right">
								<p:commandButton value="Ja"
									action="#{DekanBean.deleteModManual}" oncomplete="dlg.hide();"
									update=":outer-tabview:tabview-modManual:dekan-delete-frame:modManuals,
								:outer-tabview:tabview-modManual:dekan-edit-frame:modManuals" />
								<p:commandButton value="Nein" oncomplete="dlg.hide();" />
							</h:panelGroup>
						</p:confirmDialog>
					</p:layout>
				</p:tab>

			</p:tabView>
			<!-- End TabView -->
		</p:tab>

		<p:tab title="Pr&uuml;fungsordnung">
			<p:tabView id="tabview-exRules">

				<p:tab title="Erstellen">
					<!-- Begin of first tab // Start -->
					<p:layout style="min-width:400px;min-height:500px;"
						id="exRules-create-layout">
						<p:layoutUnit position="center">
							<h:form id="exRules-create-frame">
								<h2>Erstellen einer Pr&uuml;fungsordnung</h2>
								<table width="250" border="0" cellpadding="2">
									<tr>
										<!-- ExRules(String exRulesTitle) -->
										<td><h:outputText value="Titel: " /> <h:inputText
												id="exRules" value="#{DekanBean.exRules}"
												styleClass="input_text" /></td>
									</tr>
									<tr>
										<td colspan="2" align="left"><p:commandButton
												icon="ui-icon-trash" value="Felder l&ouml;schen"
												update=":outer-tabview:tabview-exRules:exRules-create-frame"
												action="#{DekanBean.resetField}" /> <p:commandButton
												icon="ui-icon-plusthick"
												actionListener="#{DekanBean.saveExRules}" value="Erstellen"
												update=":outer-tabview:tabview-exRules:exRules-delete-frame,  
												:outer-tabview:tabview-modManual:dekan-frame,  
												:outer-tabview:tabview-modManual:dekan-edit-frame,  
												:outer-tabview:tabview-modManual:dekan-delete-frame"
												action="#{DekanBean.actualizeExRulesList}" /></td>
									</tr>
								</table>
								<p:messages id="dekan-messages" for="dekan-messages"
									showDetail="true" autoUpdate="true" closable="true" />
							</h:form>
						</p:layoutUnit>
					</p:layout>
				</p:tab>

				<p:tab title="L&ouml;schen">
					<!-- Begin of first tab // Start -->
					<p:layout style="min-width:400px;min-height:500px;"
						id="exRules-delete-layout">
						<p:layoutUnit position="center">
							<h:form id="exRules-delete-frame">
								<h2>L&ouml;schen einer Pr&uuml;fungsordnung</h2>
								<table class="admin-delete-t" width="250" border="0"
									cellpadding="2">
									<tr>
										<td><h:outputText value="Titel" /> <p:selectOneMenu
												value="#{DekanBean.exRules}">
												<f:selectItem itemLabel="Alle Pr&uuml;fungsordnungen" itemValue="" />
												<f:selectItems value="#{DekanBean.exRulesSearchList}"
													var="exRuleSearch" itemLabel="#{exRuleSearch.exRulesTitle}"
													itemValue="#{exRuleSearch.exRulesTitle}" />
											</p:selectOneMenu></td>
									</tr>
									<tr>
										<td><p:commandButton
												actionListener="#{DekanBean.actualizeExRulesList}"
												value="Filtern"
												update=":outer-tabview:tabview-exRules:exRules-delete-frame" /></td>
									</tr>
								</table>
								<br />
								<p:dataTable id="exRules" var="exRules"
									value="#{DekanBean.exRulesList}" style="max-width:1024px"
									scrollable="true" scrollHeight="250">
									<p:column headerText="Titel" footerText=""
										style="width:96%">
										<h:outputText value="#{exRules.exRulesTitle}" />
									</p:column>
									<p:column style="width:4%" footerText="">
										<p:commandButton icon="ui-icon-trash"
											oncomplete="deleteDlg.show();"
											update=":outer-tabview:tabview-exRules:exRules-delete-frame">
											<f:setPropertyActionListener value="#{exRules}"
												target="#{DekanBean.currentER}" />
										</p:commandButton>

									</p:column>
								</p:dataTable>
							</h:form>
						</p:layoutUnit>
						<p:confirmDialog widgetVar="deleteDlg" id="deleteDialog"
							header="L&ouml;schen" message="Wirklich l&ouml;schen?" width="400" modal="true"
							closable="false" severity="alert">
							<h:panelGroup layout="block" style="text-align: right">
								<p:commandButton value="Ja" action="#{DekanBean.deleteExRules}"
									oncomplete="deleteDlg.hide();"
									update=":outer-tabview:tabview-exRules:exRules-delete-frame,  
										:outer-tabview:tabview-modManual:dekan-frame,  
										:outer-tabview:tabview-modManual:dekan-edit-frame,  
										:outer-tabview:tabview-modManual:dekan-delete-frame" />
								<p:commandButton value="Nein" oncomplete="deleteDlg.hide();" />
							</h:panelGroup>
						</p:confirmDialog>
					</p:layout>
				</p:tab>
			</p:tabView>
		</p:tab>
		
		<p:tab title="Zuweisung">
			<h:form id="access-form">
			<p:tabView id="tabview-zuweisung">
				<!-- Dialog to review access -->

				<!-- TabView -->
				<p:tab title="Vergeben">

					<p:layout style="min-width:400px;min-height:500px;"
						id="changes-layout">

						<p:layoutUnit id="changeAccess" position="center">

							<table class="acces-table" width="250" border="0" cellpadding="2">
								<tr>
									<td><h:outputText value="User" /> <p:selectOneMenu
											value="#{AccessBean.selectedUserAccept}">
											<f:selectItem itemLabel="Select One User" itemValue="-1" />
											<f:selectItems value="#{AccessBean.userList}" var="#{it}"
												itemValue="#{it}" itemLabel="#{it}" />
										</p:selectOneMenu></td>
								</tr>

								<tr>
									<td><h:outputText value="Module" /> <p:selectOneMenu
											value="#{AccessBean.selectedAccess}">
											<f:selectItem itemLabel="Select One Module" itemValue="-1" />
											<f:selectItems value="#{AccessBean.modTitleList}" var="#{it}"
												itemValue="#{it}" itemLabel="#{it}" />
										</p:selectOneMenu></td>
								</tr>
								<tr>
									<td><p:commandButton
											actionListener="#{AccessBean.acceptChanges}" value="accept" 
											update=":outer-tabview:access-form:tabview-zuweisung:changes-layout, 
											:outer-tabview:access-form:tabview-zuweisung:modAccessList"/></td>
								</tr>
							</table>
							<p:messages id="messages-access" for="messages-access"
								showDetail="true" autoUpdate="true" closable="true" />
						</p:layoutUnit>

					</p:layout>

				</p:tab>
				<p:tab title="Entziehen">

					<p:layout style="min-width:400px;min-height:500px;"
						id="list-layout">

						<p:layoutUnit id="listAccess" position="center">

							<table class="access-list-table" width="250" border="0"
								cellpadding="2">
								<tr>
									<td><h:outputText value="User" /> <p:selectOneMenu
											value="#{AccessBean.selectedUserFilter}">
											<f:selectItem itemLabel="Select One User" itemValue="-1" />
											<f:selectItems value="#{AccessBean.userList}" var="#{it}"
												itemValue="#{it}" itemLabel="#{it}" />
										</p:selectOneMenu></td>
								</tr>
								<tr>
									<td><p:commandButton
											actionListener="#{AccessBean.filterSelectionList}"
											value="filter" update=":outer-tabview:access-form:tabview-zuweisung:changes-layout, 
											:outer-tabview:access-form:tabview-zuweisung:modAccessList" /></td>
								</tr>
							</table>

							<p:dataTable id="modAccessList" var="modacc"
								value="#{AccessBean.modAccList}" style="max-width:1024px"
								scrollable="true" scrollHeight="250">
								<p:column headerText="Email" footerText="" style="width:47%">
									<h:outputText value="#{modacc.email}" />
								</p:column>
								<p:column headerText="Module" footerText="" style="width:47%">
									<h:outputText value="#{modacc.modTitle}" />
								</p:column>
								<p:column style="width:40px" footerText="">
									<p:commandButton icon="ui-icon-trash"
										oncomplete="deleteDlg.show();">
										<f:setPropertyActionListener value="#{modacc}"
											target="#{AccessBean.deleteMod}" />
									</p:commandButton>

								</p:column>
							</p:dataTable>


						</p:layoutUnit>
						<p:confirmDialog widgetVar="deleteDlg" id="deleteDialog"
							header="Delete" message="Delete this ?" width="400" modal="true"
							closable="false" severity="alert">

							<h:panelGroup layout="block" style="text-align: right">
								<p:commandButton value="Yes" action="#{AccessBean.deleteRow}"
									oncomplete="deleteDlg.hide();"
									update=":outer-tabview:access-form:tabview-zuweisung:changes-layout, 
											:outer-tabview:access-form:tabview-zuweisung:modAccessList" />
								<p:commandButton value="No" oncomplete="deleteDlg.hide();" />
							</h:panelGroup>
						</p:confirmDialog>

					</p:layout>

				</p:tab>

			</p:tabView>
			</h:form>
			
		</p:tab>
		<p:tab title="Logout">
			<table width="350" border="0" cellpadding="2">
				<tr>
					<td><h3>Wirklich ausloggen?</h3></td>
					<td><p:commandButton value="OK" type="submit"
							actionListener="#{LoginBean.logout}" /></td>
				</tr>
			</table>
		</p:tab>

	</p:tabView>
</h:body>
</html>