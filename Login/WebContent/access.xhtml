<?xml version="1.0" encoding="US-ASCII" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
	<title>Zuweisungs Panel</title>

	<link rel="stylesheet" href="./css/bootstrap.css" />
	<link rel="stylesheet" href="./css/default.css" />

</h:head>

<h:body>
	<!-- body -->
	<div style="height: 120px;">
		<p:graphicImage value="/Image/iui_19.png"
			style="position:absolute; top:20px; right:20px;" />
	</div>

	<h:form id="form">
		<p:tabView id="tabview-zuweisung">
			<!-- Dialog to review access -->

			<!-- TabView -->
			<p:tab title="User Access">

				<p:layout style="min-width:400px;min-height:500px;"
					id="changes-layout">

					<p:layoutUnit id="changeAccess" position="center">

						<table class="admin-edit-t" width="250" border="0" cellpadding="2">
							<tr>
								<td><h:outputText value="User" /> <p:selectOneMenu
										value="#{AccessBean.selectedUserAccept}">
										<f:selectItem itemLabel="Select One User" itemValue="-1" />
										<f:selectItems value="#{AccessBean.userList}" var="#{it}"
											itemValue="#{it}" itemLabel="#{it}" />
									</p:selectOneMenu></td>
							</tr>

							<tr>
								<td><h:outputText value="Module" /> <p:selectOneMenu
										value="#{AccessBean.selectedAccess}">
										<f:selectItem itemLabel="Select One Module" itemValue="-1" />
										<f:selectItems value="#{AccessBean.modTitleList}" var="#{it}"
											itemValue="#{it}" itemLabel="#{it}" />
									</p:selectOneMenu></td>
							</tr>
							<tr>
								<td><p:commandButton
										actionListener="#{AccessBean.acceptChanges}" value="accept" /></td>
							</tr>
						</table>
						<p:messages id="messages-access" for="messages-access"
							showDetail="true" autoUpdate="true" closable="true" />
					</p:layoutUnit>

				</p:layout>

			</p:tab>
			<p:tab title="User Access List">

				<p:layout style="min-width:400px;min-height:500px;"
					id="change-list-layout">

					<p:layoutUnit id="listAccess" position="center">

						<table class="list-table" width="250" border="0" cellpadding="2">
							<tr>
								<td><h:outputText value="User" /> <p:selectOneMenu
										value="#{AccessBean.selectedUserDisplay}">
										<f:selectItem itemLabel="Select One User" itemValue="-1" />
										<f:selectItems value="#{AccessBean.userList}" var="#{it}"
											itemValue="#{it}" itemLabel="#{it}" />
									</p:selectOneMenu></td>
							</tr>
							<tr>
								<td></td>

							</tr>
							<tr>
								<td><p:commandButton
										actionListener="#{AccessBean.listChanges}" value="accept"
										update=":form:tabview-zuweisung:change-list-layout" /></td>
							</tr>
						</table>
						<br />
						<h3>
							<h:outputText
								value="Zuweisungen f&uuml;r #{AccessBean.selectedUserDisplay}" />
						</h3>
						<ui:repeat id="outputValues" value="#{AccessBean.userModAccList}"
							var="modAcc">
							<li>- <h:outputText value="#{modAcc.modTitle}" /></li>
						</ui:repeat>
						<br />
						<p:dataTable id="users" var="it" value="#{AccessBean.userModAccList}"
							style="max-width:1024px" scrollable="true" scrollHeight="250">
							<p:column headerText="Email" footerText="" style="width:45%">
								<h:outputText value="#{it.email}" />
							</p:column>
							<p:column headerText="Modtitle" footerText="" style="width:45%">
								<h:outputText value="#{it.modTitle}" />
							</p:column>
							<!-- update=":tabview-admin:delete-frame:users,:tabview-admin:edit-frame:users" -->
							<p:column style="width:40px" footerText="">
								<p:commandButton icon="ui-icon-trash"
									oncomplete="deleteDlg.show();">
									<f:setPropertyActionListener value="#{it}"
										target="#{AccessBean.deleteMod}" />
								</p:commandButton>

							</p:column>
						</p:dataTable>
					</p:layoutUnit>
					<p:confirmDialog widgetVar="deleteDlg" id="deleteDialog"
						header="Delete" message="Delete this ?" width="400" modal="true"
						closable="false" severity="alert">
						<!--  update=":tabview-admin:delete-frame:users"  -->
						<h:panelGroup layout="block" style="text-align: right">
							<p:commandButton value="Yes"
								oncomplete="deleteDlg.hide();"
								/>
							<p:commandButton value="No" oncomplete="deleteDlg.hide();" />
						</h:panelGroup>
					</p:confirmDialog>
				</p:layout>

			</p:tab>
		</p:tabView>
		<!-- End TabView -->
	</h:form>
</h:body>
<!-- End body -->

</html>