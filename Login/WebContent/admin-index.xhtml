<?xml version="1.0" encoding="US-ASCII" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
	<title>Admin Panel</title>

	<link rel="stylesheet" href="./css/bootstrap.css" />
	<link rel="stylesheet" href="./css/template.css" />
	<link rel="stylesheet" href="./css/mms.css" />

</h:head>

<h:body>
	<!-- body -->
	<div style="height: 120px;">
		<p:graphicImage value="/Image/logo_100_sw.jpg"
			style="position:absolute; top:20px; right:20px;" />
	</div>
	<p:growl id="growl" showDetail="true" />
	<p:tabView id="tabview-admin" dynamic="true">
		<p:ajax event="tabChange" listener="#{NotificationBean.onTabChange}"
			update=":growl" />
		<!-- TabView -->
		<p:tab title="Create user">
			<!-- Begin of first tab // Start -->
			<p:layout style="min-width:400px;min-height:500px;"
				id="create-layout">
				<p:layoutUnit position="center" header="Adminpanel">
					<h:form id="create-frame">
						<table class="admin-create-t" width="250" border="0"
							cellpadding="2">
							<tr>
								<td colspan="2"><h2>Create User</h2></td>
							</tr>
							<tr>
								<!-- User(String email, String name, String firstname, String role...) { -->
								<td><h:outputText value="name: " /> <h:inputText id="name"
										value="#{CreateBean.name}" styleClass="input_text" /></td>
							</tr>
							<tr>
								<td><h:outputText value="firstname:  " /> <h:inputText
										id="firstname" value="#{CreateBean.firstname}"
										styleClass="input_text" /></td>
							</tr>
							<tr>
								<td><h:outputText value="email: " /> <h:inputText
										id="email" value="#{CreateBean.email}" styleClass="input_text" /></td>
							</tr>
							<tr>
								<td><h:outputText value="role:  " /> <p:selectOneMenu
										value="#{CreateBean.role}">
										<f:selectItem itemLabel="Auswahl:" itemValue="-1" />
										<f:selectItem itemLabel="Administrator" itemValue="1" />
										<f:selectItem itemLabel="Modulverantwortlicher" itemValue="2" />
										<f:selectItem itemLabel="Dezernat" itemValue="3" />
										<f:selectItem itemLabel="Redakteur" itemValue="4" />
									</p:selectOneMenu></td>
							</tr>
							<tr>
								<td colspan="2" align="right"><p:commandButton
										icon="ui-icon-trash" value="reset fields"
										update=":tabview-admin:create-frame"
										action="#{CreateBean.resetForm}" /> <p:commandButton
										icon="ui-icon-plusthick"
										actionListener="#{CreateBean.saveUser}" value="create" /></td>
							</tr>
						</table>
						<p:messages id="create-messages" for="create-messages"
							showDetail="true" autoUpdate="true" closable="true" />
					</h:form>
				</p:layoutUnit>
			</p:layout>
		</p:tab>
		<!-- End first tab // Start Delete - http://primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf as alternative for the single selection now -->
		<p:tab title="Delete user" id="tab-delete">
			<p:layout style="min-width:400px;min-height:500px;"
				id="delete-layout">
				<p:layoutUnit position="center" header="Adminpanel">
					<h:form id="delete-frame">
						<table class="admin-delete-t" width="250" border="0"
							cellpadding="2">
							<tr>
								<td><h:outputText value="User role  " /> <p:selectOneMenu
										value="#{CreateBean.role}">
										<f:selectItem itemLabel="Alle Rollen" itemValue="-1" />
										<f:selectItem itemLabel="Administrator" itemValue="1" />
										<f:selectItem itemLabel="Modulverantwortlicher" itemValue="2" />
										<f:selectItem itemLabel="Dezernat" itemValue="3" />
										<f:selectItem itemLabel="Redakteur" itemValue="4" />
									</p:selectOneMenu></td>
							</tr>
							<tr>
								<td><p:commandButton
										actionListener="#{CreateBean.findUser}" value="find"
										update=":tabview-admin:delete-frame:users,:tabview-admin:edit-frame" /></td>
							</tr>
						</table>
						<br />
						<br />

						<p:dataTable id="users" var="user" value="#{CreateBean.userList}"
							style="max-width:1024px" scrollable="true" scrollHeight="250">
							<p:column headerText="Name" footerText="" style="width:24%">
								<h:outputText value="#{user.name}" />
							</p:column>
							<p:column headerText="Vorname" footerText="" style="width:24%">
								<h:outputText value="#{user.firstname}" />
							</p:column>
							<p:column headerText="Email" footerText="" style="width:24%">
								<h:outputText value="#{user.email}" />
							</p:column>
							<p:column headerText="Rolle" footerText="" style="width:24%">
								<h:outputText value="#{user.role}" />
							</p:column>
							<p:column style="width:40px" footerText="">
								<p:commandButton icon="ui-icon-trash"
									oncomplete="deleteDlg.show();"
									update=":tabview-admin:delete-frame:users,:tabview-admin:edit-frame:users">
									<f:setPropertyActionListener value="#{user}"
										target="#{CreateBean.selectedUser}" />
								</p:commandButton>

							</p:column>
						</p:dataTable>
					</h:form>

				</p:layoutUnit>
				<p:confirmDialog widgetVar="deleteDlg" id="deleteDialog"
					header="Delete" message="Delete this ?" width="400" modal="true"
					closable="false" severity="alert">
					<h:panelGroup layout="block" style="text-align: right">
						<p:commandButton value="Yes" action="#{CreateBean.deleteRow}"
							oncomplete="deleteDlg.hide();"
							update=":tabview-admin:delete-frame:users" />
						<p:commandButton value="No" oncomplete="deleteDlg.hide();" />
					</h:panelGroup>
				</p:confirmDialog>
			</p:layout>
		</p:tab>
		<p:tab title="Edit user">
			<p:layout style="min-width:400px;min-height:500px;" id="edit-layout">

				<p:layoutUnit position="center" header="Adminpanel">
					<h:form id="edit-frame">
						<table class="admin-edit-t" width="250" border="0" cellpadding="2">
							<tr>
								<td><h:outputText value="User role  " /> <p:selectOneMenu
										value="#{CreateBean.role}">
										<f:selectItem itemLabel="Alle Rollen" itemValue="-1" />
										<f:selectItem itemLabel="Administrator" itemValue="1" />
										<f:selectItem itemLabel="Modulverantwortlicher" itemValue="2" />
										<f:selectItem itemLabel="Dezernat" itemValue="3" />
										<f:selectItem itemLabel="Redakteur" itemValue="4" />
									</p:selectOneMenu></td>
							</tr>
							<tr>
								<td><p:commandButton
										actionListener="#{CreateBean.findUser}" value="find"
										update=":tabview-admin:delete-frame,:tabview-admin:edit-frame:users" /></td>
							</tr>
						</table>
						<br />
						<p:dataTable id="users" var="user" value="#{CreateBean.userList}"
							style="max-width:1024px" scrollable="true" scrollHeight="250"
							editable="true">
							<!-- if emails should be updated to - do something in the listener method specified below
							<p:ajax event="rowEditInit" listener="#{ModuleExecutiveBean.testInit}"
                                update=":form:messages" />
							 -->
							<p:ajax event="rowEdit" listener="#{CreateBean.onEdit}"
								update=":tabview-admin:edit-frame:users,:tabview-admin:delete-frame" />

							<p:ajax event="rowEditCancel" listener="#{CreateBean.onCancel}"
								update=":tabview-admin:edit-frame:users,:tabview-admin:delete-frame" />

							<p:column headerText="Name" footerText="" style="width:24%">
								<p:cellEditor>
									<f:facet name="output">
										<h:outputText value="#{user.name}" />
									</f:facet>
									<f:facet name="input">
										<p:inputText value="#{user.name}" style="width:100%" />
									</f:facet>
								</p:cellEditor>
							</p:column>

							<p:column headerText="Vorname" footerText="" style="width:24%">
								<p:cellEditor>
									<f:facet name="output">
										<h:outputText value="#{user.firstname}" />
									</f:facet>
									<f:facet name="input">
										<p:inputText value="#{user.firstname}" style="width:100%" />
									</f:facet>
								</p:cellEditor>
							</p:column>

							<p:column headerText="Email" footerText="" style="width:24%">
								<h:outputText value="#{user.email}" />
							</p:column>

							<p:column headerText="Rolle" footerText="" style="width:24%">
								<p:cellEditor>
									<f:facet name="output">
										<h:outputText value="#{user.role}" />
									</f:facet>
									<f:facet name="input">
										<h:selectOneMenu value="#{user.role}">
											<f:selectItem itemLabel="Administrator"
												itemValue="Administrator" />
											<f:selectItem itemLabel="Modulverantwortlicher"
												itemValue="Modulverantwortlicher" />
											<f:selectItem itemLabel="Dezernat" itemValue="Dezernat" />
											<f:selectItem itemLabel="Redakteur" itemValue="Redakteur" />
										</h:selectOneMenu>
									</f:facet>
								</p:cellEditor>
							</p:column>

							<p:column style="width:6%">
								<p:rowEditor />
							</p:column>
						</p:dataTable>
						<p:messages id="edit-messages" showDetail="true" autoUpdate="true"
							for="edit-messages" />
					</h:form>
				</p:layoutUnit>
			</p:layout>

		</p:tab>

		<p:tab title="notifications">

			<p:layout style="min-width:400px;min-height:500px;"
				id="notify-layout">

				<p:layoutUnit position="west" resizable="true" size="400"
					minSize="215" maxSize="400" header="Nachrichten" collapsible="true">
					<h:form id="Notification-Panel">

						<p:dataTable id="notifications" var="noti"
							value="#{NotificationBean.notificationList}" scrollable="true"
							rowKey="#{noti.timeStamp}" scrollHeight="400"
							selection="#{NotificationBean.selectedNotification}"
							selectionMode="single" autoUpdate="true">
							<p:ajax event="rowSelect"
								listener="#{NotificationBean.selectedNotificationIsRead}"
								update=":tabview-admin:notify-layout" />

							<p:column>
								<p:graphicImage value="/Image/Notification/#{noti.status}.png"
									style="width: 40px;" />
									 #{noti.senderEmail} 
	
							</p:column>
							<f:facet name="footer">
								<div align="center">
									<p:commandButton value="decline" icon="ui-icon-closethick"
										actionListener="#{NotificationBean.declineSelectedNotification}"
										update=":tabview-admin:notify-layout" />
									<p:commandButton value="accept" icon="ui-icon-check"
										actionListener="#{NotificationBean.acceptSelectedNotification}"
										update=":tabview-admin:notify-layout"/>
								</div>
							</f:facet>
						</p:dataTable>

					</h:form>
				</p:layoutUnit>

				<p:layoutUnit position="center"
					header="Date: #{NotificationBean.selectedNotification.timeStamp} 
				Sender: #{NotificationBean.selectedNotification.senderEmail} 
				Action: #{NotificationBean.selectedNotification.action}">
					<h:outputText id="message"
						value="#{NotificationBean.selectedNotification.message}" />
				</p:layoutUnit>

			</p:layout>
		</p:tab>
	</p:tabView>
	<!-- End TabView -->

</h:body>
<!-- End body -->

</html>